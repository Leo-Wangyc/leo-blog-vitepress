import{_ as a,o as s,c as e,Q as o}from"./chunks/framework.4719a631.js";const t="/assets/image-20211223175455216.2cf662ac.png",l="/assets/image-20211223175558501.cf5f248c.png",n="/assets/image-20211223175647209.0ecdfb8e.png",p="/assets/image-20211223175716100.183e5ce2.png",r="/assets/image-20211223175825223.409b3258.png",c="/assets/image-20211223180127768.3fdf1a1c.png",i="/assets/image-20220105171511971.3b3e4f9b.png",d="/assets/image-20220105171604319.76ef953d.png",h="/assets/image-20220105171718485.c75b39a4.png",v=JSON.parse('{"title":"前置知识","description":"","frontmatter":{},"headers":[],"relativePath":"documents/computer-science/Front-end/CloudDevelopment.md","filePath":"documents/computer-science/Front-end/CloudDevelopment.md"}'),m={name:"documents/computer-science/Front-end/CloudDevelopment.md"},u=o('<p>CloudDevelopment</p><p>周分享会（2021-8-20）</p><ul><li>主题：小程序云开发</li><li>ppt 地址：<a href="https://prezi.com/view/LuFhZsaxvjLS7vaeV1eR/" target="_blank" rel="noreferrer">https://prezi.com/view/LuFhZsaxvjLS7vaeV1eR/</a></li><li>相关参考视频/文档： ① 快速搭建 Taro 云开发项目脚手架：<a href="https://taro-docs.jd.com/taro/docs/GETTING-STARTED" target="_blank" rel="noreferrer">https://taro-docs.jd.com/taro/docs/GETTING-STARTED</a> ② 云开发学习视频：<a href="https://www.bilibili.com/video/BV1x54y1s7pk?p=60&amp;spm_id_from=pageDriver" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV1x54y1s7pk?p=60&amp;spm_id_from=pageDriver</a> ③ 云函数部署失败解决办法：<a href="https://blog.csdn.net/qq_34464926/article/details/96497906" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_34464926/article/details/96497906</a> ④ 微信云开发文档：<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html</a> ⑤ Taro 云开发文档：<a href="https://taro-docs.jd.com/taro/docs/apis/cloud/cloud/" target="_blank" rel="noreferrer">https://taro-docs.jd.com/taro/docs/apis/cloud/cloud/</a></li></ul><h1 id="前置知识" tabindex="-1">前置知识 <a class="header-anchor" href="#前置知识" aria-label="Permalink to &quot;前置知识&quot;">​</a></h1><p>###微信 openId 和微信 unionId</p><blockquote><p><a href="https://juejin.cn/post/6844903789044973575" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903789044973575</a></p></blockquote><h1 id="云开发" tabindex="-1">云开发 <a class="header-anchor" href="#云开发" aria-label="Permalink to &quot;云开发&quot;">​</a></h1><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><h1 id="云函数" tabindex="-1">云函数 <a class="header-anchor" href="#云函数" aria-label="Permalink to &quot;云函数&quot;">​</a></h1><h2 id="云函数本地调试方法" tabindex="-1">云函数本地调试方法 <a class="header-anchor" href="#云函数本地调试方法" aria-label="Permalink to &quot;云函数本地调试方法&quot;">​</a></h2><p>前置条件：<strong>要保证在有云函数的项目中进行本地调试，否则会报找不到云函数</strong></p><img src="'+t+'" alt="image-20211223175455216" style="zoom:50%;"><p>即如图所示，需为上述项目中才可</p><p>具体步骤：</p><p>1.<img src="'+l+'" alt="image-20211223175558501" style="zoom:50%;"></p><p>打开云开发面板</p><p>2.<img src="'+n+'" alt="image-20211223175647209" style="zoom:50%;"></p><p>进入云函数区块</p><p>3.<img src="'+p+'" alt="image-20211223175716100" style="zoom:40%;"></p><p>选择本地调试</p><p>4.<img src="'+r+'" alt="image-20211223175825223" style="zoom:50%;"></p><p>开发面板右侧，选择手动调用，如果选择从模拟器调用，请保持基础库等级低于 2.14.3</p><p>5.<img src="'+c+'" alt="image-20211223180127768" style="zoom:50%;"></p><p>更改上述相关参数，即可实现本地调用</p><h2 id="云函数调用云数据库方式" tabindex="-1">云函数调用云数据库方式 <a class="header-anchor" href="#云函数调用云数据库方式" aria-label="Permalink to &quot;云函数调用云数据库方式&quot;">​</a></h2><blockquote><p>云函数请求云数据库为异步，所以，需要进行异步处理</p><p><a href="https://blog.csdn.net/weixin_43430789/article/details/90601066" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_43430789/article/details/90601066</a></p></blockquote><ul><li><p><strong>云函数调用云数据库后，直接返回 success，没有返回所 return 的内容，或者打印出来是 Undefined</strong></p><ol><li>先查看云数据库集合名称是否正确</li><li>再查看云数据库权限是否设置为可读</li><li>仔细查看异步逻辑，promise 之间的处理</li></ol><p>详细样例可以查看农场项目里面的 getGoldAndCheck 云函数</p></li></ul><h2 id="云函数引入插件" tabindex="-1">云函数引入插件 <a class="header-anchor" href="#云函数引入插件" aria-label="Permalink to &quot;云函数引入插件&quot;">​</a></h2><h2 id="云函数中的时区问题" tabindex="-1">云函数中的时区问题 <a class="header-anchor" href="#云函数中的时区问题" aria-label="Permalink to &quot;云函数中的时区问题&quot;">​</a></h2><p>注：云函数中默认的时区为 UTC+0，并不是 UTC+8 的中国时区，如果要默认 UTC+8，则需要更改云函数的环境变量，设置 TZ 为 asia/shanghai</p><blockquote><p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/notice.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/notice.html</a></p></blockquote><p>具体操作：</p><ul><li><p>第一步，进入云函数版本管理</p><img src="'+i+'" alt="image-20220105171511971" style="zoom:30%;"></li><li><p>第二步，点击配置</p><img src="'+d+'" alt="image-20220105171604319" style="zoom:30%;"></li><li><p>第三步，写入配置 TZ, Asia/Shanghai，点击确认即可</p><img src="'+h+`" alt="image-20220105171718485" style="zoom:50%;"></li></ul><h1 id="云数据库" tabindex="-1">云数据库 <a class="header-anchor" href="#云数据库" aria-label="Permalink to &quot;云数据库&quot;">​</a></h1><h2 id="云数据库数据获取-get" tabindex="-1">云数据库数据获取 get <a class="header-anchor" href="#云数据库数据获取-get" aria-label="Permalink to &quot;云数据库数据获取 get&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">db</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Taro.cloud.</span><span style="color:#B392F0;">database</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">//或者 wx.cloud.database();</span></span>
<span class="line"><span style="color:#E1E4E8;">db.</span><span style="color:#B392F0;">collection</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;demo&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">() </span><span style="color:#6A737D;">// collection表示集合，传参为集合的名称</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {})</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">catch</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">db</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Taro.cloud.</span><span style="color:#6F42C1;">database</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">//或者 wx.cloud.database();</span></span>
<span class="line"><span style="color:#24292E;">db.</span><span style="color:#6F42C1;">collection</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;demo&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  .</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">// collection表示集合，传参为集合的名称</span></span>
<span class="line"><span style="color:#24292E;">  .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">((</span><span style="color:#E36209;">res</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {})</span></span>
<span class="line"><span style="color:#24292E;">  .</span><span style="color:#6F42C1;">catch</span><span style="color:#24292E;">((</span><span style="color:#E36209;">err</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {});</span></span></code></pre></div><h1 id="云存储" tabindex="-1">云存储 <a class="header-anchor" href="#云存储" aria-label="Permalink to &quot;云存储&quot;">​</a></h1><h1 id="项目实战" tabindex="-1">项目实战 <a class="header-anchor" href="#项目实战" aria-label="Permalink to &quot;项目实战&quot;">​</a></h1><h2 id="恋之农场项目" tabindex="-1">恋之农场项目 <a class="header-anchor" href="#恋之农场项目" aria-label="Permalink to &quot;恋之农场项目&quot;">​</a></h2><h2 id="开发中遇到的问题" tabindex="-1">开发中遇到的问题 <a class="header-anchor" href="#开发中遇到的问题" aria-label="Permalink to &quot;开发中遇到的问题&quot;">​</a></h2><h3 id="_1-如何让多渠道小程序共用一套云" tabindex="-1">1.如何让多渠道小程序共用一套云 <a class="header-anchor" href="#_1-如何让多渠道小程序共用一套云" aria-label="Permalink to &quot;1.如何让多渠道小程序共用一套云&quot;">​</a></h3><blockquote><p>无法实现</p></blockquote><h3 id="_2-如何同时打开同一个微信和-qq-小程序" tabindex="-1">2. 如何同时打开同一个微信和 qq 小程序 <a class="header-anchor" href="#_2-如何同时打开同一个微信和-qq-小程序" aria-label="Permalink to &quot;2. 如何同时打开同一个微信和 qq 小程序&quot;">​</a></h3><p>Taro 的项目 config 目录下进行配置</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">outputRoot</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">\`dist/\${</span><span style="color:#E1E4E8;">process</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">env</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">TARO_ENV</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">,</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">outputRoot</span><span style="color:#24292E;">: </span><span style="color:#032F62;">\`dist/\${</span><span style="color:#24292E;">process</span><span style="color:#032F62;">.</span><span style="color:#24292E;">env</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">TARO_ENV</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">,</span></span></code></pre></div><p>把输入端带上当前跑的环境即可互不影响</p><h1 id="云部署静态网站" tabindex="-1">云部署静态网站 <a class="header-anchor" href="#云部署静态网站" aria-label="Permalink to &quot;云部署静态网站&quot;">​</a></h1><p>云部署静态网站可以用于从普通浏览器，或者别的腾讯系 app 中跳转小程序</p><blockquote><p>参考文档：<a href="https://zhuanlan.zhihu.com/p/336173709" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/336173709</a></p></blockquote>`,49),y=[u];function E(g,b,_,q,f,k){return s(),e("div",null,y)}const x=a(m,[["render",E]]);export{v as __pageData,x as default};
